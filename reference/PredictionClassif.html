<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prediction Object for Classification — PredictionClassif • mlr3</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- Google Site Verification -->
<meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84" />

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>

<!-- docsearch -->


<meta property="og:title" content="Prediction Object for Classification — PredictionClassif" />
<meta property="og:description" content="This object wraps the predictions returned by a learner of class LearnerClassif, i.e.
the predicted response and class probabilities.
If the response is not provided during construction, but class probabilities are,
the response is calculated from the probabilities: the class label with the highest
probability is chosen. In case of ties, a label is selected randomly." />
<meta property="og:image" content="https://mlr3.mlr-org.com/logo.png" />
<meta name="twitter:card" content="summary" />

<!--

//-->

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mlr3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">0.1.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mlr-org/mlr3">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prediction Object for Classification</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3/blob/master/R/PredictionClassif.R'><code>R/PredictionClassif.R</code></a></small>
    <div class="hidden name"><code>PredictionClassif.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This object wraps the predictions returned by a learner of class <a href='LearnerClassif.html'>LearnerClassif</a>, i.e.
the predicted response and class probabilities.</p>
<p>If the response is not provided during construction, but class probabilities are,
the response is calculated from the probabilities: the class label with the highest
probability is chosen. In case of ties, a label is selected randomly.</p>
    </div>



    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p><a href='https://rdrr.io/pkg/R6/man/R6Class.html'>R6::R6Class</a> object inheriting from <a href='Prediction.html'>Prediction</a>.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>If this object is constructed manually, make sure that the factor levels for <code>truth</code>
have the same levels as the task, in the same order.
In case of binary classification tasks, the positive class label must be the first level.</p>
    <h2 class="hasAnchor" id="construction"><a class="anchor" href="#construction"></a>Construction</h2>

    
<pre>p = PredictionClassif$new(task = NULL, row_ids = task$row_ids, truth = task$truth(), response = NULL, prob = NULL)
</pre>
<ul>
<li><p><code>task</code> :: <a href='TaskClassif.html'>TaskClassif</a><br />
Task, used to extract defaults for <code>row_ids</code> and <code>truth</code>.</p></li>
<li><p><code>row_ids</code> :: (<code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code> | <code><a href='https://rdrr.io/r/base/character.html'>character()</a></code>)<br />
Row ids of the observations in the test set.</p></li>
<li><p><code>truth</code> :: <code><a href='https://rdrr.io/r/base/factor.html'>factor()</a></code><br />
True (observed) labels. See the note on manual construction.</p></li>
<li><p><code>response</code> :: (<code><a href='https://rdrr.io/r/base/character.html'>character()</a></code> | <code><a href='https://rdrr.io/r/base/factor.html'>factor()</a></code>)<br />
Vector of predicted class labels.
One element for each observation in the test set.
Character vectors are automatically converted to factors.
See the note on manual construction.</p></li>
<li><p><code>prob</code> :: <code><a href='https://rdrr.io/r/base/matrix.html'>matrix()</a></code><br />
Numeric matrix of posterior class probabilities with one column for each class
and one row for each observation in the test set.
Columns must be named with class labels, row names are automatically removed.
If <code>prob</code> is provided, but <code>response</code> is not, the class labels are calculated from
the probabilities using <code><a href='https://rdrr.io/r/base/maxCol.html'>max.col()</a></code> with <code>ties.method</code> set to <code>"random"</code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="fields"><a class="anchor" href="#fields"></a>Fields</h2>

    

<p>All fields from <a href='Prediction.html'>Prediction</a>, and additionally:</p><ul>
<li><p><code>response</code> :: <code><a href='https://rdrr.io/r/base/factor.html'>factor()</a></code><br />
Access to the stored predicted class labels.</p></li>
<li><p><code>prob</code> :: <code><a href='https://rdrr.io/r/base/matrix.html'>matrix()</a></code><br />
Access to the stored probabilities.</p></li>
<li><p><code>confusion</code> :: <code><a href='https://rdrr.io/r/base/matrix.html'>matrix()</a></code><br />
Confusion matrix resulting from the comparison of truth and response.
Truth is in columns, predicted response is in rows.</p></li>
</ul>

<p>The field <code>task_type</code> is set to <code>"classif"</code>.</p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<ul>
<li><p><code>set_threshold(th)</code><br />
<code><a href='https://rdrr.io/r/base/numeric.html'>numeric()</a></code> -&gt; <code>self</code><br />
Sets the prediction response based on the provided threshold.
See the section on thresholding for more information.</p></li>
</ul>

    <h2 class="hasAnchor" id="thresholding"><a class="anchor" href="#thresholding"></a>Thresholding</h2>

    

<p>If probabilities are stored, it is possible to change the threshold which determines the predicted class label.
Usually, the label of the class with the highest predicted probability is selected.
For binary classification problems, such an threshold defaults to 0.5.
For cost-sensitive or imbalanced classification problems, manually adjusting the threshold can increase
the predictive performance.</p><ul>
<li><p>For binary problems only a single threshold value can be set.
If the probability exceeds the threshold, the positive class is predicted.
If the probability equals the threshold, the label is selected randomly.</p></li>
<li><p>For binary and multi-class problems, a named numeric vector of thresholds can be set.
The length and names must correspond to the number of classes and class names, respectively.
To determine the class label, the probabilities are divided by the threshold.
This results in a ratio &gt; 1 if the probability exceeds the threshold, and a ratio &lt; 1 otherwise.
Note that it is possible that either none or multiple ratios are greater than 1 at the same time.
Anyway, the class label with maximum ratio is selected.
In case of ties in the ratio, one of the tied class labels is selected randomly.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other Prediction: <code><a href='PredictionRegr.html'>PredictionRegr</a></code>,
  <code><a href='Prediction.html'>Prediction</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>task</span> <span class='kw'>=</span> <span class='fu'><a href='mlr_sugar.html'>tsk</a></span>(<span class='st'>"iris"</span>)
<span class='no'>learner</span> <span class='kw'>=</span> <span class='fu'><a href='mlr_sugar.html'>lrn</a></span>(<span class='st'>"classif.rpart"</span>, <span class='kw'>predict_type</span> <span class='kw'>=</span> <span class='st'>"prob"</span>)
<span class='no'>learner</span>$<span class='fu'>train</span>(<span class='no'>task</span>)
<span class='no'>p</span> <span class='kw'>=</span> <span class='no'>learner</span>$<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='no'>task</span>)
<span class='no'>p</span>$<span class='no'>predict_types</span></div><div class='output co'>#&gt; [1] "response" "prob"    </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'><a href='as.data.table.html'>as.data.table</a></span>(<span class='no'>p</span>))</div><div class='output co'>#&gt;    row_id  truth response prob.setosa prob.versicolor prob.virginica
#&gt; 1:      1 setosa   setosa           1               0              0
#&gt; 2:      2 setosa   setosa           1               0              0
#&gt; 3:      3 setosa   setosa           1               0              0
#&gt; 4:      4 setosa   setosa           1               0              0
#&gt; 5:      5 setosa   setosa           1               0              0
#&gt; 6:      6 setosa   setosa           1               0              0</div><div class='input'>
<span class='co'># confusion matrix</span>
<span class='no'>p</span>$<span class='no'>confusion</span></div><div class='output co'>#&gt;             truth
#&gt; response     setosa versicolor virginica
#&gt;   setosa         50          0         0
#&gt;   versicolor      0         49         5
#&gt;   virginica       0          1        45</div><div class='input'>
<span class='co'># change threshold</span>
<span class='no'>th</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.05</span>, <span class='fl'>0.9</span>, <span class='fl'>0.05</span>)
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>th</span>) <span class='kw'>=</span> <span class='no'>task</span>$<span class='no'>class_names</span>

<span class='co'># new predictions</span>
<span class='no'>p</span>$<span class='fu'>set_threshold</span>(<span class='no'>th</span>)$<span class='no'>response</span></div><div class='output co'>#&gt;   [1] setosa    setosa    setosa    setosa    setosa    setosa    setosa   
#&gt;   [8] setosa    setosa    setosa    setosa    setosa    setosa    setosa   
#&gt;  [15] setosa    setosa    setosa    setosa    setosa    setosa    setosa   
#&gt;  [22] setosa    setosa    setosa    setosa    setosa    setosa    setosa   
#&gt;  [29] setosa    setosa    setosa    setosa    setosa    setosa    setosa   
#&gt;  [36] setosa    setosa    setosa    setosa    setosa    setosa    setosa   
#&gt;  [43] setosa    setosa    setosa    setosa    setosa    setosa    setosa   
#&gt;  [50] setosa    virginica virginica virginica virginica virginica virginica
#&gt;  [57] virginica virginica virginica virginica virginica virginica virginica
#&gt;  [64] virginica virginica virginica virginica virginica virginica virginica
#&gt;  [71] virginica virginica virginica virginica virginica virginica virginica
#&gt;  [78] virginica virginica virginica virginica virginica virginica virginica
#&gt;  [85] virginica virginica virginica virginica virginica virginica virginica
#&gt;  [92] virginica virginica virginica virginica virginica virginica virginica
#&gt;  [99] virginica virginica virginica virginica virginica virginica virginica
#&gt; [106] virginica virginica virginica virginica virginica virginica virginica
#&gt; [113] virginica virginica virginica virginica virginica virginica virginica
#&gt; [120] virginica virginica virginica virginica virginica virginica virginica
#&gt; [127] virginica virginica virginica virginica virginica virginica virginica
#&gt; [134] virginica virginica virginica virginica virginica virginica virginica
#&gt; [141] virginica virginica virginica virginica virginica virginica virginica
#&gt; [148] virginica virginica virginica
#&gt; Levels: setosa versicolor virginica</div><div class='input'><span class='no'>p</span>$<span class='fu'>score</span>(<span class='kw'>measures</span> <span class='kw'>=</span> <span class='fu'><a href='mlr_sugar.html'>msr</a></span>(<span class='st'>"classif.ce"</span>))</div><div class='output co'>#&gt; classif.ce 
#&gt;  0.3333333 </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#format">Format</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#construction">Construction</a></li>
      <li><a href="#fields">Fields</a></li>
      <li><a href="#methods">Methods</a></li>
      <li><a href="#thresholding">Thresholding</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michel Lang, Bernd Bischl, Jakob Richter, Patrick Schratz, Martin Binder.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


